{% extends "base.html" %}
{% block title %}Cancellazione Account{% endblock %}
{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="dashboard-card">
                <h2>Richiesta Cancellazione Account</h2>
                
                <div class="alert alert-info">
                    <h5>Come richiedere la cancellazione del tuo account</h5>
                    <p>Per garantire la sicurezza dei dati e verificare la tua identità, la cancellazione dell'account deve essere richiesta tramite email.</p>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Istruzioni per la Richiesta</h5>
                        
                        <ol>
                            <li><strong>Invia un'email a:</strong> 
                                <a href="mailto:helpdesk@auxiell.com?subject=Richiesta Cancellazione Account GDPR&body=Gentile Team,%0D%0A%0D%0ADesidero richiedere la cancellazione del mio account secondo l'Art. 17 del GDPR (Diritto alla cancellazione).%0D%0A%0D%0AEmail account: {{ session.user_email }}%0D%0ANome: {{ session.utente }}%0D%0AAzienda: {{ session.azienda_scelta }}%0D%0A%0D%0AConfermo di voler eliminare definitivamente tutti i miei dati personali inclusi:%0D%0A- Informazioni account%0D%0A- Risultati di tutti i test completati%0D%0A- Storico delle attività%0D%0A%0D%0AGrazie per l'assistenza.%0D%0A%0D%0ACordiali saluti" class="btn btn-primary">
                                    helpdesk@auxiell.com
                                </a>
                            </li>
                            
                            <li><strong>Includi nella richiesta:</strong>
                                <ul class="mt-2">
                                    <li>La tua email aziendale: <strong>{{ session.user_email }}</strong></li>
                                    <li>Nome completo: <strong>{{ session.utente }}</strong></li>
                                    <li>Azienda: <strong>{{ session.azienda_scelta }}</strong></li>
                                    <li>Conferma esplicita di voler eliminare tutti i dati</li>
                                </ul>
                            </li>
                            
                            <li><strong>Tempi di risposta:</strong> La richiesta sarà elaborata entro 30 giorni lavorativi</li>
                        </ol>
                    </div>
                </div>
                
                <div class="alert alert-warning mt-3">
                    <h6>Importante da sapere:</h6>
                    <ul class="mb-0">
                        <li>La cancellazione è <strong>irreversibile</strong></li>
                        <li>Tutti i tuoi test e risultati saranno eliminati definitivamente</li>
                        <li>Non potrai più accedere al sistema con questo account</li>
                        <li>La verifica dell'identità è obbligatoria per motivi di sicurezza</li>
                    </ul>
                </div>
                
                <div class="card bg-light mt-3">
                    <div class="card-body">
                        <h6>Template Email Rapido</h6>
                        <div class="border p-3 bg-white">
                            <small>
                                <strong>A:</strong> helpdesk@auxiell.com<br>
                                <strong>Oggetto:</strong> Richiesta Cancellazione Account GDPR<br><br>
                                
                                Gentile Team,<br><br>
                                
                                Desidero richiedere la cancellazione del mio account secondo l'Art. 17 del GDPR (Diritto alla cancellazione).<br><br>
                                
                                <strong>Dati Account:</strong><br>
                                - Email: {{ session.user_email }}<br>
                                - Nome: {{ session.utente }}<br>
                                - Azienda: {{ session.azienda_scelta }}<br><br>
                                
                                Confermo di voler eliminare definitivamente tutti i miei dati personali.<br><br>
                                
                                Cordiali saluti
                            </small>
                        </div>
                        <button class="btn btn-outline-secondary btn-sm mt-2" onclick="copyEmailTemplate()">
                            Copia Template
                        </button>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
                        Torna alla Dashboard
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function copyEmailTemplate() {
    const template = `A: helpdesk@auxiell.com
Oggetto: Richiesta Cancellazione Account GDPR

Gentile Team,

Desidero richiedere la cancellazione del mio account secondo l'Art. 17 del GDPR (Diritto alla cancellazione).

Dati Account:
- Email: {{ session.user_email }}
- Nome: {{ session.utente }}
- Azienda: {{ session.azienda_scelta }}

Confermo di voler eliminare definitivamente tutti i miei dati personali inclusi:
- Informazioni account
- Risultati di tutti i test completati
- Storico delle attività

Grazie per l'assistenza.

Cordiali saluti`;

    navigator.clipboard.writeText(template).then(function() {
        alert('Template copiato negli appunti!');
    });
}
</script>
{% endblock %}
